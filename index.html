<!DOCTYPE html>
<HTML ng-app="plunker">
	<HEAD>
		<title>
			Maps API
		</title>
	    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.10/angular.js"></script>
	    <script src="//angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.11.0.js"></script>
	    <script src="example.js"></script>
	    <script src="DynamicMark.js"></script>
	    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
	    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    	<style type="text/css">
    		html { height: 100% }
    		body { height: 100%; margin: 0; padding: 0; background-image: url("http://www.hdwallpapers.in/walls/blue_background_abstract-wide.jpg"); background-repeat: no-repeat;}
			#map-canvas { 
				height: 81%;
				width: 100%;
				top: 90px;

			} 
			.form-control {
				top: 0px;
				right: 0px;
				width: 30%;
			}
			.btn-group{
				position: absolute;
				right: 690px;
				top: 0px;
				color: green;

			}
			#Welcome {
				top: 30px;
				font-size: 28px;
			}
			.btn-group1{
				position: absolute;
				right: 620px;
				top: 0px;
			}
    </style>
    <script type="text/javascript"
    	src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCO_urdeK3kxU7h4aE835JqxGYle3Lxu90">
    </script>


    </head>
        <script type="text/javascript">
    	/* Set sensor to true in the previous one */
		var map, lat, lon;
		var TypeOfPlace, service;
		var Currlocation = new google.maps.LatLng(13.0839, 80.2700);
		document.addEventListener('DOMContentLoaded', drawMap);
		function drawMap() {
			var mapOptions = {
				zoom: 13,
				mapTypeId: google.maps.MapTypeId.ROADMAP,
				draggable : true
				};
			map = new google.maps.Map(document.getElementById("map-canvas"),
			mapOptions);

			if(navigator.geolocation) {
			    browserSupportFlag = true;
			    navigator.geolocation.getCurrentPosition(function(position) {
			    	initialLocation = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
			    	map.setCenter(initialLocation);
			    	var marker = new google.maps.Marker({
						position: initialLocation,
						map: map,
						title: 'You\'re here !'
					});
			    }, 
			    function() {
			    	handleNoGeolocation(browserSupportFlag);
			    });
			}
			  // Browser doesn't support Geolocation
			else {
				browserSupportFlag = false;
			    handleNoGeolocation(browserSupportFlag);
			}

			function handleNoGeolocation(errorFlag) {
				if (errorFlag == true) {
			    	alert("Geolocation service failed.");
			    	initialLocation = Currlocation;
			    } 
			    else {
			    	alert("Your browser doesn't support geolocation. We've placed you in Siberia.");
			    	initialLocation = Currlocation;
			    }
			    map.setCenter(initialLocation);
			  }
			

			
			var infowindow = new google.maps.InfoWindow({
				content: "This is a test",
				maxWidth: 270
			});
			var request = {
				location : Currlocation,
				radius: '500',
				types: ['Test'],
				openNow : true
			};
			/*beyond this point the feature will be available soon */
			var service = new google.maps.places.PlacesService(map);
			service.nearbySearch(request, callback);
			function callback(results, status){
				if(status == google.maps.places.PlacesServiceStatus.OK){
					for (var i = 0; i < results.length; i++){
						var place = results[i];
						new google.maps.Marker({
							position: results[i],
							map: map,
							title: 'ping'
						});
					}
				}
				else {
					alert(status);
					return
				}
			} 
			google.maps.event.addListener(marker, 'click', infowindow.open(map, marker));
		}
	google.maps.event.addDomListener(window, 'load', drawMap);
    </script>

	<div class='container-fluid' ng-controller="TypeaheadCtrl">
   
     <!--{{asyncSelected | json}}-->
    <input type="text" ng-model="asyncSelected" placeholder="Search.." typeahead="address for address in getLocation($viewValue)" typeahead-loading="loadingLocations" class="form-control">
    <i ng-show="loadingLocations" class="glyphicon glyphicon-refresh"></i>
	<div class="btn-toolbar">
	  <div class="btn-group">
	   <button class="btn btn-success"> MarkOnMap</button>
	   <button class="btn btn-success"> GetDirections</button>
	  </div>

	</div>
	</div>
	<div class="btn-group1">
	  <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
	    Menu
	    <span class="caret"></span>
	  </a>
	  <ul class="dropdown-menu">
	    <li><a href="#">Choice1</a></li>
	    <li><a href="#">Choice2</a></li>
	    <li><a href="#">Choice3</a></li>
	    <li class="divider"></li>
	    <li><a href="#">Choice..</a></li>
	  </ul>
	</div>
	<script type="text/javascript">

	</script>
	<div id="map-canvas"> 
    </div>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js">
    </script>
    </body>
</html>